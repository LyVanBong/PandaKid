workflows:
  publishing:
    name: Publishing
    environment:
      vars:
        KEYSTORE_PATH: /tmp/keystore.keystore
        KEYSTORE: Encrypted(Z0FBQUFBQmdRT0JKZlRYbUUycFZfTjhRNnFHc3ByTjVxUnF6MUV4d1dDWE5WaHFiVGZSZFl6blpMaVZIVm5HWmJ3b1d4MVFqUnBwcWxUb21LWVZQSzMwaEtUSHhTUGpSQXNpSHVPeWFlRHhBRW81cGlNRXRsenJUS04xXzlrU2xlTm1ROFIxeUtaeHlCRHdwSk9Pb1dfaFFENGdkemlLdWpxWDlpeDVRR0F4ZFBVZTAxZ0RCYU56UTBZNW5aYk1fWmoxcTkwNlItaFJvSDRpMmJwRDM0SHNWQU1Ib3JKZEYzd0wzbVNWVFRxakx4WWtmX2ZBV1MzS2NNMktOOHQyOVJkZEdQRnZTRy1pa25JXzhBamhDMWtJUjN2ZFVtSlBsWHFfdDFtYWhyRDZpTTFwZWlGX01XVElfVlN6dm5rWDEyeGJsVmtUUm9GaWgyOFhzNlZ2WHF0ajFVa1BCQWlvZzBpcUpjLWx5NVduSHd6ZmQ4WlhEM2lFSldNMUEwaWlYMzNmdGptT29BSEpTcUhTb0g2U0lvSmQzNHdBdC1JUWktVkUxZ29LRHcyNVZWSWR0eHZFQU9KdmlyT3lmYnk2dVpoOVBzN3lOY3czbFdzM2Fxd1BVZGxpV3U3TmFlVjNvd1hhWkhiNmZ3WDY1eE1VTUJaSk9ZLW0xRTJXN3lfTko0TFJFWkI2VDFYYUY0bmhRRlJhd0VZVXROVnZoM3VHYjVQb1dZUjRaUW5WYlZfZ01JVl82RVR6N0FYT0hsVDRoS2dNN3ZxT04ycnAwOGhGTDdfVEd3UXMzUVpFNGVsc1RlSzMzMERSYklqUzlNaWp3MEZ4VzZuTjg2bFo3U0RHU1lXQkwxMkpRZEVSRlREUDVlRnlRZ0VPbnVfOVVnUXVjUnJ5RUtvMmhsLTRFdlRadW1penJOTkpWVHk4UFQ2ckQ2OHlnNU8yVlgweGxQSEtlQ05EYWVXR0owVk41aEJJWEowTGRnUVNPdXJDcHNZV2U5eEl0RWRKSjRrbkV0aDNEbUUxZUNzRzFqSHdfbWZSYnVwSFc0WDZDNllVM2RjSk5hUGd0VFdQVTU5cm11YlpNTk0yQXRUNHRGMlBMMm9hOTgyVFNVcHdaYk1SYUpZNUhGMnp0bEhhVVJMSjhRaFdfMWhvcjVQVzdYU2RTX1RiUUtwMnJXVGc0NG94LTI2amllQVpVZWQtOEVtNVd1RTlORWVGTTFIZnIycUR5elhVc19uZ0NqTFh5ZFl6Q05VTWxjdUdjUEpXeS1oTlh6bDZfWUNScjh4XzNHa3ZRa3AtSTVqOWw0UU5GQ1BMVGhOUlE2Q3hUM2NVbnpZTGZ1bnpnNVNlZW43cHBlS2UwYnJTZW9GS3E5SEVYQXdTMVc3Z3pVN1lkUTFqSzlPYkIxQ2tDUXl0WUFaVkx6d1VxaEx3N0dzMkRyUlNFbWF0Q2M1d2U3S0VlcWYtcUM3YVZLcExRRTh2Y3V6QU1uUS1od2U4SWxRTW9HQUtEM0Y3bGkxbXdMQ3pqem9Gc1Q3QUpzV3ZueFVuUnY3RGg0NjlNVnlzNmE2VndmV29HMXFRY1p4OUJoY1MxZ2ZPQ1p2cTIzbldPbEswZ2NfckRuc0tLLWlidm5kVWNRcEZBdE9rSGlJRVB0R2hhSlVmaUdQNnZkS3RiaVVTT0JKUmgza1oyMVNNYU1sYmFDUE9XZEh2NEltb01CU2Q0eVhJZXROdGtwUG81cFc2dThSVU1MaUIxaGlBVXFXRThFRTktRDlJdjUxNTY2V1RPWkZSamM1TnkzYlNEanlWZGVIcFZBZU5PTDkycVoyekExdHdnYlFnY0g4WHJ5OTU5alpPSU1BOVk3dFpVelFYdGdGankycW9yemkzaGdCX1FseXBVUWFtcm8yeVYwWjN3QldZN1ppaGg5bFhhXzNXN25tRmViRWtXZnVmUWZWdzBXYzBTQWRLVzBSenJpSmNiZ18ybTJ4Y2hSNXlzM1MwVEJ1QU15VHFjYUZjUjd2R3l0Sml1TnZvSEw4MHFOLTZDanFqS1lUSHlTeWd2cDgwNGROZnU1WjBwbUNzaFNrZ0xJaVJ4VzN5MERFX1dBUUJDM0Rqdjh6RzNNOFlUNTdIdDhCRW83UXFoSExGQmxyTlpmNmdrMjlsbGp6U0ViVWVROXlZaUd5Zm5EcmxrWVJHeVpGOEU5dmozS3ZudURpMTFQUDB4Smx0NEY0ajlkQVA2V2k4VHFkaFNzVGJ1SV9NM3MxTDh1YlJYbnNhQXdoVDR3QzhMRFpmVW85RW5kLWZqQ1oxd0E2WWdWdHRKLWdMdHNSeGRXT1hnUXJvUC1BY1ZLSXBVWGJ1Qk9QeG95Nkd5aW5YQ1dWM3NWSEszN1JPR3BmZFQ4SEhHNHktcUdBYTl4TGJ2OTdlQ2VCTXhCMzBLOGZtUTFYbEhvaHowbjc3YUxrRktPZVZWUFN2TFFEQTdhT3ZLSjJmLXcxZk16c0hVMDVzTXAyR1lyNDZoQnNTSGI4Y1I4VWRaWVFSelQ1NjdHWVJaQlNCX29GSl9McUVZeTVGRmZxcmtRa2NEOWQ5TU1jTjJVcWZWUXlneW9oYzNQVDVhTFdDSHFYN0EwQmxSUGZ3MmpNU3ZPcUxzZVJxOURTLXFKTnpLNUF5ZjVOakg1a19vV1ZjMm5GVk9QX0VEdlRCSDVzWm16RnRPS2dQZndQNjdDYS1jR29WRlh4WUNNN251YlAwMTc0bnh2T0Q3NkFlaXR4bmwwX25RbnJzMkwxcjA2UzBHeU9RcXFHX2pCWTRSNGZCLV85WnNiMWR4di1lVjJsUXp4Y1ZMUF9xNEJkVlFOWkd1cnhBVHM4LUtqbFM1YldHTmlJd2tfQUFwcVhyYkhaM2tuUXR3WXhuSE5tdi1HanM3SzVTUHc1X1RPX3U4NzJMZ3ZZR2lKRmpHbThwRGJYR1BrT2hYM1I1Z1l3Tk1CTlItYWdzWlY4eUV4TmlYelUwdlBHOEhBbHVaQmpmVmlVV3YwX19qR0NwYzIzOTB5SGJMQmFyS0pkYmxDaTdOSGlKMTRTbWRpZkhubEt6SHp4ZkQ5ODRfVnZmSVg1TEdXNTNwb2RGU3pFTndLc1FZYmM4UG16STFDMUZfSThKV2RiWHZvX3lQS2NkNWszeXZfdHZscVhPQnNjbzdjTzBWbEpFODVuMnl1OUhfNFg2eWdYUEVrMXdkaVhfeVItMUtUb1hoQXd4OUFudWx1YVNFUnFWZTRhYll1V2lIWDEtazRGR2xmakJQQmFOT3BsZk56bV95VG5PS2FfcS1JVGdQbDVHVjVSSFMyLXNLbEo2VEY3Q1ptX3M4blVZM0QxYjBIMXlVYy15UnZ0QzlGM1pEUUxDcnk3VzZyQmpDUUo4NWUwMWt6UmdURC12dUY2aGEyVS1lemd5dW91dk82VzJhdUF0bU40bmtwdG9KRkx0OHRPLU9HNnpyYUNtREVkS3ZGdnpLSE9Zc0JXSEY4QkxJbjFUYmRYamhVQ0FuajR5Ym5HMFRQQ0FiZi1yaTVxTVo1ejJ3QWtVSDhTejNqME5VN0JhUjRoSUg1SVNnYlhaQnB0QXMzcFpaM0s1MUtKcG1iUmROODZFYjlHdEl2bk1lNUgtY3h2WnpjeWpPdDZMMFFGNlBpdi1lcVdFSnN6Q2UwMUN1UnpoU3A5NkFNeEdvbnFmRE1ZT0hvc3hZTm9DTlRSYnZZUG1DWDhISTk3UFQ3eXowV183SnRpb2RWOGZza3VOdHpqSzZDQmoydUpJYXF2Q1Z3c0VWTzYxNjNIQ2NCdFE4Mk9DcXl4OUF6RnZOX3dCVUh4SDZHWF9LbmRLX21OSm1yQkdQeHR2Mk5SRWUtREc1b3UwZTNMWmdVUE5VbVk0NnhxSmZiYmpNTy01b2NCQUVWNENORFF3b0hjaEljNkFyeU95RnVMbmdzcFRxLWdXVlBxU3l1ZmlSaWpOVF9NT0RwSEFtRVRJMEFVSS1oOEFMVTNLWTNoZjNGY0E4T1JqSFY4OFBDLTFULTJlVGFDRDhPc0ZfeHVtUy05SjJTeE1xLXVRdGcwem5ObVVTaXZMQkRBRnI2TDVRcGNlTHVjcXd4Z2hDa0wwYXM4MGtNYl9pZ0NiVkZ4VUNxT1RTS21zMGRLc0ZlcFMtQVIxclZyUjFidjI0Z1RPeDRGSDB0VG9OTTZKdTFsY1lGalliV2g0eFVJWWROVzF6UjdqbXFydjFXckh2bWxNMFQ0UXJfYjY2a001NXVaa1VhY1BDSndWcWRQcGg3Rm10N3pWOGxYeXRDaEk2MXFzZzFfZHZoa2djZ25rN3RSZ0lJZW1oa3JjalpKR0s5N0xmdzNieEFSZy1JVXZRdWNLaFNfbW5FanZtbVI5MjZTTFVBUk1UTEdjTzRnSXFVZU9YdlZMbXBTSmFwRHd4TGJQbnN4Y2Z3djdpYnU4ODdlZUJFTGptc1NoN2ZTOXZlQTZfdTR1VE5INE5OS2ZsOURHcE9hdDd6VTl1U3RUVDQ5M0FnUGZfVzVXY3YzT1QwVGU4X29XUjcxSzhYeldyQUozRWZZSjE3dUhFSVVrU0s2NlhEWEw0YU9XTjZWd2NGMkdqanJrVjFHS3R1Y2NzRHRtLVdJeFFjdlpqRG9CV09oU2Uwenlwa1huTXJCeHlRWFJzQWN4MmRianhVOWRYbmUwWWl2a2xZMXpCMWZ1YUdvckx6UGd4dHcteUlqaWhzVVZxVFRaZFlHOHFDbm1XcXVfNnlqNjZ2TGZpYlBmeno0bDdhaEpHb0ZfMENOaE9KUF9vTS0yYjRLTkJEZENJX2VBNFRwQkFRX0tITV9yaGNJcnhBU1VrM0ZjbXNaNjlrVlBVVS16bWtHT1RsN2lLQUxPMDRaWE5EMmxIbU50Z0dtY292LWY0ZS1qdWo5amVwdTZqUkozdjlBY0loNzc3ZHdzdVRRTV83bzZvdzdFV05hTEpxY2w5WnFQUFpGaUhkR0o1bVhqdXBhTzR5ckQwNkNIQi1yUVRFWFl4NHV5Ym9aaDZTcGVadEdIdzdnX1JEdUV1U2VVZ3V3YWd2bXE3dXI1dUlRbXdBLWZoTF95VzhNZGlqUUpOaUZRRHhrTExEQWxmYVpBdXlnRkljN1dLNHpUM2dxcUpoLTRnWjNYenZQZXhnS21FYW5xQ05QZENCMy10ckw5R1M5X0R6QTJHTC1lZHZ2dlo2TnRlN3lNTS1sYlktLS11RW9RRWp2UTJyZE9LQnNNRkkyUlljZFItM2FSU2k0NERGdjhKem5jLTJWNEVYcDE3eTgydWFoMU1OamVGUjVxLW91d2xWUzZkSGwxd1ZTdDl0Y2hTOVZ5VHJoQm8wdm9xZDduci1wSkpOeXpPS3pOS3JDOF92UFZxMVZ0T19LYjcycFJQUkNLSnNYYUpaTGItZlFWOTF0VXdaVWxVcXZJeVVQdnJOcGhqakFyQW1YNHo4bmNmOGEzU2lEcTI3WTVpZXhUdA==)
        KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmdRT0F0WG5udzFKdGEwS2I5VU5uamp6X0o5dVgtNHRGOVYxVC03c0ViQ0ZSVlhZcUZSZnpzc25IX0JhVExjY0hjZFRMNlB1SEtiX25KVmd2OUxXdlNEalBJLUE9PQ==)
        KEY_ALIAS: Encrypted(Z0FBQUFBQmdRTl96RW1kWXdHQ2IwWG1iQXpYNHNwTkw5aGNVa3dXZzJwWnhpZzRnWjBFLVBDdGl1VEN1ZEx6YTBhQ3FNSEtLX3R4eDhzaFExckhsT0YwSERTV0lobWhPNVE9PQ==)
        KEY_PASSWORD: Encrypted(Z0FBQUFBQmdRT0Fia1pjUENQYWxvVG5zYk5keG1KZVJkV3N1bk5XWmhrX29lNlJ5NGVya0s0eHpubFFHeEVOZmdMdk13aE1QdUd1dF9Ic2VYOXRKUWlIZ2pJSG5QMDBuR1E9PQ==)
        GCLOUD_SERVICE_ACCOUNT_CREDENTIALS: Encrypted(Z0FBQUFBQmdRT0NLZ3JYWU9UQWtOQ2hCcDAteDhUUjBVeEtKeVJzUlJjV2ZKb0JVeVVQS2ZBOEV5dmptSlVMMnlJWldQOVlqNWQ1YU14dHl6VE1DcThWTmJMYmlzUExXZ2tBcVVrT3Y2Q2ZyZlN6Vlk1bWU1a3o0dzhMekdLRVk4b1Mwdk0yckxnSWE5dFRBT01mQ2g3RkhVMjI5SVNVU3YzX01ibkw3MlVJU0YxSDlRb3lqTzBFREVQTUNJMDFBQW00QTJra0tOTDMyd21iY3NuTm5YZWY5ZnU4Z2UyZVk4V2c0Q0hPR2tUYjdlZ2RRVm1uUXRGUEhJQ3pGVktxaVVxMWtuWGY3U3Y0VkZjX0ZJQ01DbG1saG5SdW5qenp2eklUQm1Pc1EwUklfeHVzSnpXaVd2YmxVWVByUDBpazhZNTZFbV9GSGozc2hsZWY4c0dreXVxQUZldVE3S2ZqeFppdzg0UG9MSjFBenVaUE5RQjM1bURVWEhBNDhLWTkwTmMwT3VXdTJRSXc0bC0zWWJRRlZPeVJ3LWV2SnpCYUE1X20yVjZFSFNNbHk5TnlrYjJCN1lDNFI4XzZKU1I1M0hyb1pVTVEtRktSaDVWSVh3THNYX0k1Z1RTSi1PdFYyNWJWSUtlWW05V2JjRW03OVdZODd4VnJ3b2praHJ3Zm53ZUV4QVQ3MnVRQmRIQ2ZoZU43YXI4WjI2anFHU0R0YUVHdkM4TmtVNUJmckZhaVc3LWY2bzh4U2k3dkNiQVE5VUc5UXM4LVBidkVwc25Sb0hhVDFxeGNqcEtiQ3laMUdKVVVkNUVLQTdDa2Y2ZDBkcUJkWlJCOGp3dWpicmNJV3JDbWJ5RWV4YUg1eV9Qa2ZOVXlvVzQyOEpjRnNJTFhIYkVzeG9acGlxREZKRUMyNnNad2R2WnVacmVwdzVTVzAxNmNZLXhFdFRldWpCTmlTWG0wQWVzZ2FjMnNmUmJFU0FZNTd5YXhXMWdTcG1GT1lZSWpUUW94eXVXaHJnMjBZR1prb1RRakVBMU5BTVJJVW5XWjFTLTd5R3VJMk9FRlVsX0VLQW5tWkNmc0RFYUhpeG8yaWJBSVBJa1h4Z1ZUcHBkbm1mOVZJWXVUekszU1AzZU14QmtKMmJfMXJIT283NjNBeUxxV19DMTU5d0JyR3MwY0ZZRTFjVWM2VXJpTlFDUnVuNW9Rc0MydTBVWURFZnBIbGtsV2QxUVk4VUMwNVpTVXRwQmpoM3FxQUpodFVMbDM0TnlEZmhULUhQR1NCOHNaWGxLNUQ4U2c5eU9XZG5ZNzMyaFhsYW9zTHc4S3Z3Y3lJUUZ3aFdMeVVJSjh6M1Vzb0tneDRpMzBJSE96T1FndUlmVVN6Wm11MG9Kb3pNR1Fxb3J2MW95S0dTVG1hVW12SHFIZzEwemI5Uk5UNXVnQjdWNlZfYWhaQXI5c3RRWnRmNU9PQm0xSzJIS0d6XzRVdnRKSXBISVgtNjdjUzJWRVZhYkpiblk4WGpLekNzSlk1TnQwYVNXTHVNNmZlYnA4S1lkQl9DM3g3ZjJVU0xVMG44Vzg0clNOSHJ3QjRGOFRhc3ZtTEt1MG5UYzlfVVk5LThWTlFvVThhM2xBc2taNTl2OWpaWGNsbk1DaWFiYUx1QmdIcURYRzB5a3c1ZmthQjVTQlZ6aXdHUUw3WVNQbTc1U0RYZjBhaTk3Y3ZvQUx1V2NkU3R0TWZrdTRrZDQ4c0g0b1NsMm5hNjFUYlBldjcwOE1xaVFLOXJTc0hGazQ2MjFyQi1EbzdPb3VWMllWYjllZnYwZ2REZzNpSUxubldJY0lTSGFRbm9SSG8zWFB1RzBPS3N2SmtoQUtoOFBFNW1feWFNUkFYMElUOGtqbzhWS0MxNVkxbWthYkpXVTBOYmJwaElHaXI1dFhQdmtfeW91M19fVGlHYWRyUDU0SEpMWkFseTRaUmk2RDV5MXhTeW5lZkpoQ0RhTzdwSUpQNGpCMEc1N1pTS1ZBWlVKZmJEX3l0MURXVXFnRHozeUQtZ0p0aHdnaWlveHZ6aHNnX0REMFFsVUJ6RGRqZ1BSbkozTm5aaDM0NEVTNWdVbzczUkRjY0dHQXZXY2sxY3ByTDdzVUh5eUN4OUFLdVI4cS1pV0M5dl9UMVpQNzY5dkktZTMteUJiSEdNeDg3bnlaWHFTSUIya0pCWnFvTjFMUl9CT1lXVlJuSE5wQWd5VTI4VmR5Vk9YLXZFVW5nbnJ2aTkySWx6alZEYnNqT0N1WGdwYXBUeGQ0WGFuZVA4cjJHb3JUVHRPbDVua0hOdDRtV1dQWG1kcWxHRVpvVnJYVDJ3YUl0b3AxZ1Rjc3kzN0NJZzRMeVFCcW96YVUwOG91UDBkOE9hSEdZb1NKR01vLTRUQzJsbWZxNkRjc3F5VmdRQTM5S21Yb1ZncjZSVW5lLWNvUWZzaHJSak5DOWdpU3dRUnJWSUVxOTlncTJzZF9nUmVYazU5UTZqZ0ZrLUdYQXV6NzU0LVdMa25EVUxGUWlfb00tUjZmcTk0Ri1raVBnZVhHSXhjcDBjQWRmQU1KODlUWVJnNzA5Q2hrcUlQNHJWRXJaZnhoSm85SjVmUWdyeDh1azZyTDFKa1lmZVAyMm45NWN2R09UanBhRFJEMUkzS3NCYWppYXdDRl9sdTVadk1ra1RXSDZxdThkSnVhc0d2NG1YRXFLS0QwZnYybzR1QWpLeGZoeXBveVdSaF9yanpNWVMtLWRCTjRCSTl2MG9pVzhIcXlYNG5RZURhN2xTT1I0RkFiR2xMVzNTLTVLNmVHbUoybnFYc09paThVUmV2aEE3bDhGNUZKU0gzZlNtLU5Zd1RGOWhudEJmbU43WEcwNHN6bUkzdG1OemFaWXJrNFlURFhZOVUzelVkU1dySVdyMG54RG9MS1JjckdZRURDckdzUkZXVTh3Z2ZzRTliNjhSSVZfZHZPRGhTNkNjdDBsZmxjTUhpSTlZRGVqRV9UNUxwVUlpdUw0T29CT3gzUnFIeUFBWEc5bWE5ampldWEzWHJVM0JPcDlJY00xVmg4djNvOUd4UVdPMFRCVWVjRXpubFNQcGFXRERKdm1GMC1WaDBDQTVNdU9PcHlwbjVTZ1czajBEaTdTdnBNVjNUSW8wYzZPQnltX2lmVEVyTF9wX0xwMDNDUXNNcTViQTJzaDdPVEt0YTZkT1R6Q1kyaGtQVnFyRUEyUE15Qi1vYTlJb05uMURJOW41UlpUUy1kZklhWDFfenEtR3c1WlJ5bWJLcGFsTWU4MkNyamRyaFVfczhhOUJ0T3JwTTlHLUdKTVNZZW9zRXFhdTdVUkdoTzhQbTNDN3k5S1NwMWxCMnBrSHVtbmVRTzhReEZ3blA0R3h5eWRTekxpY2s5TnVKT0xtYXRWbEdGUWs0a3BCaS00TkVHUXZ4dE9LWXZfQm8zeXRFd3U5NjctVkRjWG9CV0NGcFBxMWNMLXowYmdtNm1IVFFuVWNCNUUxUXhKejNBckZvbXQ5UG82WVlqRDVaNkg0Q2RYQXNGWDhoVmZKdThWaU8yc0JtMVZQM1BvRVlOZWRXZ25Fb1pvcTdWUjNNOVB2V1h0RVRPbER6em5ZY0tiYmF6Zkh0bUY5eDBtemRpYkM2VWtWdUhoQWhVamRvSjlQTXpwYTJRaV9hZVJWYjQwZHVJUnFQUDdpRDduaEdna1QtVk5qMmFDY1o4SUVRcG1YVWNpT0FsdE56amM0dzVpRDd3bldReVFSMUYxUjIzU1dqUWxEUDVRZDdLLWlvWXhpdVFOdkVEUmEzczQzd1I5ODVMWUNhYW55NUlkVzJkTDdEVDIyZHBOQ0xhNmVtc3NUd05fMldzYkhoTU9wbDViY3BzZEtMaDV2eUFNRHZzWDRsLUxrNE9RR0FTUnMzeTBQSFJXdkR1ajZ4TUMzRUhFeFNvdE5raDZ5dDRwU1lFcUlTQ2ZwLUp4b2xERHZpR05ucm5ZRXhPS2hGQnB6YXc4OU41VXFRT2JZVU5KajhBLVVkbEhZaXhfSk9ZaExhZV9KdnBtVlRHNUNDajI4UUlBUVZRY0ZjM1QzVVZMdFlHREdBUjdZWXFvWDU2UmFsQ1ZTY3JIb3E1MXZJT0RSaDhJNHVHZUdFS2FWUnBaNkVKY1FlS3Z3dWhnb0lxRHplU1otNGFoalVVMXdWUnRsUXhha01CMWx3eGMyM195WGo4ZzI4TElXSFhGOENoV2F5UHlncVM0ZEFaSUFnN1lGeXY0azg2eWJVMGVYdzhrcnhfSUJ1S05aU1FCUmY5Z2JSMlV3RWpLU1ItdFl3PT0=)
    scripts:
      - name: Prepare code signing
        script: echo $KEYSTORE | base64 --decode > $KEYSTORE_PATH
      - name: Build
        script: |
          LATEST_GOOGLE_PLAY_BUILD_NUMBER=$(google-play get-latest-build-number --package-name 'io.codemagic.androidhelloworldapp')
          if [ -z LATEST_BUILD_NUMBER ]; then
            # fallback in case no build number was found from google play. Alternatively, you can `exit 1` to fail the build
            UPDATED_BUILD_NUMBER=$BUILD_NUMBER
          else
            UPDATED_BUILD_NUMBER=$(($LATEST_GOOGLE_PLAY_BUILD_NUMBER + 1))
          fi

          # provide build number and version through project properties
          ./gradlew bundleRelease -PversionCode=$UPDATED_BUILD_NUMBER -PversionName=1.0.$UPDATED_BUILD_NUMBER
    artifacts:
      - app/build/**/outputs/**/*.aab
    publishing:
      google_play:
        credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
        track: internal
